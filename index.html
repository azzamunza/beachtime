<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beach Conditions Chart</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="sticky-header">
        <nav class="nav-container">
            <div class="nav-brand">üèñÔ∏è BeachTime</div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="index.html" class="nav-link active">Beach Time</a></li>
                <li class="nav-item"><a href="fishing.html" class="nav-link">Fishing Time</a></li>
            </ul>
        </nav>
    </header>
    
    <div class="container">
        <h1>üèñÔ∏è Beach Conditions</h1>
        
        <div class="controls-section">
            <div class="control-group">
                <label for="latitude">Latitude</label>
                <input type="text" id="latitude" value="-31.9688" />
            </div>
            <div class="control-group">
                <label for="longitude">Longitude</label>
                <input type="text" id="longitude" value="115.7673" />
            </div>
            <button class="search-btn" id="locationSearchBtn">
                <span>üîç</span>
                <span>Location Search</span>
            </button>
            <div class="timezone-dropdown">
                <span>üåê</span>
                <select id="timezoneSelect">
                    <option value="Australia/Perth" selected>Australia/Perth</option>
                    <option value="UTC">UTC</option>
                    <option value="Australia/Adelaide">Australia/Adelaide</option>
                    <option value="Australia/Sydney">Australia/Sydney</option>
                    <option value="Australia/Brisbane">Australia/Brisbane</option>
                    <option value="Australia/Darwin">Australia/Darwin</option>
                    <option value="Australia/Hobart">Australia/Hobart</option>
                    <option value="Asia/Singapore">Asia/Singapore</option>
                    <option value="Asia/Tokyo">Asia/Tokyo</option>
                    <option value="Europe/London">Europe/London</option>
                    <option value="Europe/Berlin">Europe/Berlin</option>
                    <option value="America/New_York">America/New_York</option>
                    <option value="America/Los_Angeles">America/Los_Angeles</option>
                </select>
            </div>
        </div>
        
        <div class="modal-overlay" id="locationModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Search Location</h2>
                    <button class="close-btn" id="closeModal">&times;</button>
                </div>
                <div class="search-input-container">
                    <input type="text" id="locationSearchInput" class="search-input" placeholder="Search for a location..." autocomplete="off" />
                </div>
                <ul id="searchResults" class="search-results" style="display: none;"></ul>
                <div class="recent-section">
                    <h3 class="recent-title">Recent Locations</h3>
                    <ul id="recentLocations" class="recent-list"></ul>
                </div>
            </div>
        </div>
        
        <div class="day-selector" id="globalDaySelector">
        </div>
        
        <div class="controls-row">
            <button class="day-btn" id="weeklyOverviewBtn">Weekly Overview</button>
        </div>
        
        <div class="tab-menu" id="chartTabMenu">
            <button class="tab-btn active" data-chart="separated">Separated Rings</button>
            <button class="tab-btn" data-chart="overlaid">Overlaid</button>
            <button class="tab-btn" data-chart="stacked">Stacked</button>
            <button class="tab-btn" data-chart="hourlyRating">Hourly Rating</button>
        </div>
        
        <div class="chart-container active" id="separatedChart">
        <div class="viz-card">
            <h2 class="viz-title">Swanbourne Beach</h2>
            <p class="viz-subtitle" id="chartDate">Loading...</p>
            
            <div class="canvas-container">
                <canvas id="mainCanvas"></canvas>
            </div>
            
            <div class="data-timeline">
                <div class="timeline-title">Hourly Data</div>
                <div class="timeline-container" id="timeline1"></div>
            </div>
            
            <div class="location-label">
                <div class="location-name">Swanbourne Beach</div>
                <div class="location-date" id="currentDate">Loading...</div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #F28C28;"></div>
                    <span><strong>Temperature</strong> (ideal: 32¬∞C)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #1F5FA8;"></div>
                    <span><strong>Water Temp</strong> (warmer is better)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #32dbae;"></div>
                    <span><strong>Wind Speed</strong> (ideal: 0-15 km/h)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #c1cad9;"></div>
                    <span><strong>Cloud Cover</strong> (less is better)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #7993e8;"></div>
                    <span><strong>Precipitation</strong> (background)</span>
                </div>
            </div>
            
            <div class="info-box">
                <div class="info-title">How to Read This Chart</div>
                <div class="info-text">
                    The chart flows clockwise from 7am (left) through 12pm-1pm (top) to 7pm (right) in a semi-circle arc. 
                    Each colored ring represents a different metric in its own range. Temperature (innermost), Water Temp, Wind Speed, and Cloud Cover (outermost, inverted).
                    Precipitation probability is shown as a water droplet pattern in the background of each hour segment.
                    Higher values within each ring indicate better scores (closer to ideal conditions). 
                    Time labels and detailed readings appear around the outside of the chart.
                </div>
            </div>
        </div>
        </div>
        
        <div class="chart-container" id="overlaidChart">
        <div class="viz-card">
            <h2 class="viz-title">Overlaid Comparison</h2>
            <p class="viz-subtitle" id="chartDate2">Loading...</p>
            
            <div class="canvas-container">
                <canvas id="overlayCanvas"></canvas>
            </div>
            
            <div class="data-timeline">
                <div class="timeline-title">Hourly Data</div>
                <div class="timeline-container" id="timeline2"></div>
            </div>
            
            <div class="location-label">
                <div class="location-name">Swanbourne Beach</div>
                <div class="location-date" id="currentDate2">Loading...</div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #F28C28;"></div>
                    <span><strong>Temperature</strong> (ideal: 32¬∞C)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #1F5FA8;"></div>
                    <span><strong>Water Temp</strong> (warmer is better)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #32dbae;"></div>
                    <span><strong>Wind Speed</strong> (ideal: 0-15 km/h)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #c1cad9;"></div>
                    <span><strong>Cloud Cover</strong> (less is better)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #7993e8;"></div>
                    <span><strong>Precipitation</strong> (background)</span>
                </div>
            </div>
            
            <div class="info-box">
                <div class="info-title">How to Read This Chart</div>
                <div class="info-text">
                    This chart shows all metrics overlaid in the same 0-1 range, making it easy to compare them directly. 
                    The chart flows clockwise from 7am (left) through 12pm-1pm (top) to 7pm (right) in a semi-circle arc. 
                    Precipitation probability is shown as a water droplet pattern in the background of each hour segment.
                    Higher values indicate better scores (closer to ideal conditions). 
                    Time labels and detailed readings appear around the outside of the chart.
                </div>
            </div>
        </div>
        </div>
        
        <div class="chart-container" id="stackedChart">
        <div class="viz-card">
            <h2 class="viz-title">Stacked View</h2>
            <p class="viz-subtitle" id="chartDate3">Loading...</p>
            
            <div class="canvas-container">
                <canvas id="stackedCanvas"></canvas>
            </div>
            
            <div class="data-timeline">
                <div class="timeline-title">Hourly Data</div>
                <div class="timeline-container" id="timeline3"></div>
            </div>
            
            <div class="location-label">
                <div class="location-name">Swanbourne Beach</div>
                <div class="location-date" id="currentDate3">Loading...</div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #F28C28;"></div>
                    <span><strong>Temperature</strong> (ideal: 32¬∞C)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #1F5FA8;"></div>
                    <span><strong>Water Temp</strong> (warmer is better)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #32dbae;"></div>
                    <span><strong>Wind Speed</strong> (ideal: 0-15 km/h)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #c1cad9;"></div>
                    <span><strong>Cloud Cover</strong> (less is better)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #7993e8;"></div>
                    <span><strong>Precipitation</strong> (background)</span>
                </div>
            </div>
            
            <div class="info-box">
                <div class="info-title">How to Read This Chart</div>
                <div class="info-text">
                    This chart shows all metrics stacked on top of each other with normalized values. 
                    Each metric is divided by the total number of datasets (4), ensuring the combined stack never exceeds 1.0.
                    Temperature forms the base layer, Water Temp is stacked on top, Wind Speed comes next, and Cloud Cover (inverted) at the outermost.
                    Precipitation probability is shown as a water droplet pattern in the background of each hour segment.
                    The chart flows clockwise from 7am (left) through 12pm-1pm (top) to 7pm (right) in a semi-circle arc. 
                    The total height at any time shows the normalized combined scores of all metrics.
                </div>
            </div>
        </div>
        </div>
        
        <div class="chart-container" id="hourlyRatingChart">
        <div class="viz-card">
            <h2 class="viz-title">Hourly Rating</h2>
            <p class="viz-subtitle" id="chartDate4">Loading...</p>
            
            <div class="chart-with-controls">
                <div class="chart-main-area">
                    <div class="canvas-container">
                        <canvas id="hourlyRatingCanvas"></canvas>
                    </div>
                    
                    <div class="location-label">
                        <div class="location-name">Swanbourne Beach</div>
                        <div class="location-date" id="currentDate4">Loading...</div>
                    </div>
                    
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: linear-gradient(to right, #667eea, #764ba2);"></div>
                            <span><strong>Normalized Rating</strong> (positive - negative factors)</span>
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <div class="info-title">How to Read This Chart</div>
                        <div class="info-text">
                            This chart shows the normalized beach rating for each hour of the day. 
                            The rating uses a multiplicative approach where all factors (Temperature, Water Temperature, Wind Speed, Cloud Cover, Precipitation) are multiplied together.
                            This means if any single factor is poor, it heavily penalizes the overall rating, providing a more realistic assessment of beach suitability.
                            The chart flows clockwise from 7am (left) through 12pm-1pm (top) to 7pm (right) in a semi-circle arc. 
                            Higher values indicate better overall beach conditions.
                        </div>
                    </div>
                </div>
                
                <div class="right-side-controls">
                    <div class="controls-section-title">‚öôÔ∏è Controls</div>
                    
                    <div class="slider-section">
                        <div class="slider-section-header">‚öñÔ∏è Rating Weights</div>
                        <div class="weight-slider-group">
                            <div class="weight-slider-item">
                                <span class="weight-slider-label">üå°Ô∏è Temperature</span>
                                <input type="range" class="weight-slider" id="tempWeight" min="0" max="2" step="0.1" value="1.5">
                                <span class="weight-value" id="tempWeightValue">1.5</span>
                            </div>
                            <div class="weight-slider-item">
                                <span class="weight-slider-label">üåä Water Temp</span>
                                <input type="range" class="weight-slider" id="waterWeight" min="0" max="2" step="0.1" value="0.4">
                                <span class="weight-value" id="waterWeightValue">0.4</span>
                            </div>
                            <div class="weight-slider-item">
                                <span class="weight-slider-label">üí® Wind Speed</span>
                                <input type="range" class="weight-slider" id="windWeight" min="0" max="2" step="0.1" value="0.6">
                                <span class="weight-value" id="windWeightValue">0.6</span>
                            </div>
                            <div class="weight-slider-item">
                                <span class="weight-slider-label">‚òÅÔ∏è Cloud Cover</span>
                                <input type="range" class="weight-slider" id="cloudWeight" min="0" max="2" step="0.1" value="0.5">
                                <span class="weight-value" id="cloudWeightValue">0.5</span>
                            </div>
                            <div class="weight-slider-item">
                                <span class="weight-slider-label">üíß Precipitation</span>
                                <input type="range" class="weight-slider" id="precipWeight" min="0" max="2" step="0.1" value="1.4">
                                <span class="weight-value" id="precipWeightValue">1.4</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="slider-section">
                        <div class="slider-section-header">üìä Ideal Ranges</div>
                        
                        <div class="range-slider-item">
                            <div class="range-slider-label">
                                <span>üå°Ô∏è Temperature (¬∞C)</span>
                            </div>
                            <div class="range-inputs">
                                <div class="range-input-group">
                                    <span class="range-input-label">Min</span>
                                    <input type="range" class="range-slider-small" id="tempMinRange" min="0" max="50" step="1" value="22">
                                    <span class="range-value-display" id="tempMinValue">22¬∞C</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Ideal Min</span>
                                    <input type="range" class="range-slider-small" id="tempIdealMinRange" min="0" max="50" step="1" value="25">
                                    <span class="range-value-display" id="tempIdealMinValue">25¬∞C</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Ideal Max</span>
                                    <input type="range" class="range-slider-small" id="tempIdealMaxRange" min="0" max="50" step="1" value="36">
                                    <span class="range-value-display" id="tempIdealMaxValue">36¬∞C</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Max</span>
                                    <input type="range" class="range-slider-small" id="tempMaxRange" min="0" max="50" step="1" value="40">
                                    <span class="range-value-display" id="tempMaxValue">40¬∞C</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="range-slider-item">
                            <div class="range-slider-label">
                                <span>üåä Water Temp (¬∞C)</span>
                            </div>
                            <div class="range-inputs">
                                <div class="range-input-group">
                                    <span class="range-input-label">Min</span>
                                    <input type="range" class="range-slider-small" id="waterMinRange" min="0" max="35" step="1" value="19">
                                    <span class="range-value-display" id="waterMinValue">19¬∞C</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Ideal Min</span>
                                    <input type="range" class="range-slider-small" id="waterIdealMinRange" min="0" max="35" step="1" value="20">
                                    <span class="range-value-display" id="waterIdealMinValue">20¬∞C</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Ideal Max</span>
                                    <input type="range" class="range-slider-small" id="waterIdealMaxRange" min="0" max="35" step="1" value="25">
                                    <span class="range-value-display" id="waterIdealMaxValue">25¬∞C</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Max</span>
                                    <input type="range" class="range-slider-small" id="waterMaxRange" min="0" max="35" step="1" value="35">
                                    <span class="range-value-display" id="waterMaxValue">35¬∞C</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="range-slider-item">
                            <div class="range-slider-label">
                                <span>üí® Wind Speed (km/h)</span>
                            </div>
                            <div class="range-inputs">
                                <div class="range-input-group">
                                    <span class="range-input-label">Min</span>
                                    <input type="range" class="range-slider-small" id="windMinRange" min="0" max="50" step="1" value="0">
                                    <span class="range-value-display" id="windMinValue">0 km/h</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Ideal Min</span>
                                    <input type="range" class="range-slider-small" id="windIdealMinRange" min="0" max="50" step="1" value="0">
                                    <span class="range-value-display" id="windIdealMinValue">0 km/h</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Ideal Max</span>
                                    <input type="range" class="range-slider-small" id="windIdealMaxRange" min="0" max="50" step="1" value="19">
                                    <span class="range-value-display" id="windIdealMaxValue">19 km/h</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Max</span>
                                    <input type="range" class="range-slider-small" id="windMaxRange" min="0" max="50" step="1" value="30">
                                    <span class="range-value-display" id="windMaxValue">30 km/h</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="range-slider-item">
                            <div class="range-slider-label">
                                <span>‚òÅÔ∏è Cloud Cover (%)</span>
                            </div>
                            <div class="range-inputs">
                                <div class="range-input-group">
                                    <span class="range-input-label">Min (Best)</span>
                                    <input type="range" class="range-slider-small" id="cloudMinRange" min="0" max="100" step="5" value="0">
                                    <span class="range-value-display" id="cloudMinValue">0%</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Max (Worst)</span>
                                    <input type="range" class="range-slider-small" id="cloudMaxRange" min="0" max="100" step="5" value="100">
                                    <span class="range-value-display" id="cloudMaxValue">100%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="range-slider-item">
                            <div class="range-slider-label">
                                <span>üíß Precipitation (%)</span>
                            </div>
                            <div class="range-inputs">
                                <div class="range-input-group">
                                    <span class="range-input-label">Min (Best)</span>
                                    <input type="range" class="range-slider-small" id="precipMinRange" min="0" max="100" step="5" value="0">
                                    <span class="range-value-display" id="precipMinValue">0%</span>
                                </div>
                                <div class="range-input-group">
                                    <span class="range-input-label">Max (Worst)</span>
                                    <input type="range" class="range-slider-small" id="precipMaxRange" min="0" max="100" step="5" value="100">
                                    <span class="range-value-display" id="precipMaxValue">100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="weight-buttons">
                        <button class="weight-btn" id="saveWeightsBtn">üíæ Save Settings</button>
                        <button class="weight-btn secondary" id="loadWeightsBtn">üìÇ Load Settings</button>
                        <button class="weight-btn tertiary" id="resetWeightsBtn">‚Ü∫ Reset to Default</button>
                    </div>
                </div>
            </div>
        </div>
        </div>
        
        <div class="chart-container" id="weeklyOverviewChart">
        <div class="viz-card">
            <h2 class="viz-title">Weekly Overview</h2>
            <p class="viz-subtitle">Daily normalized ratings for the week</p>
            
            <div class="canvas-container">
                <canvas id="weeklyOverviewCanvas"></canvas>
            </div>
            
            <div class="location-label">
                <div class="location-name">Swanbourne Beach</div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(to right, #667eea, #764ba2);"></div>
                    <span><strong>Daily Average Rating</strong> (normalized for the day)</span>
                </div>
            </div>
            
            <div class="info-box">
                <div class="info-title">How to Read This Chart</div>
                <div class="info-text">
                    This chart displays the average normalized rating for each day of the week. 
                    Each bar represents a full day's average of hourly ratings (7am-7pm).
                    The hourly ratings use a multiplicative approach where poor conditions in any factor heavily penalize the overall score.
                    Daily averages are then calculated from these hourly ratings, providing a realistic view of each day's beach suitability.
                    Higher values indicate better overall beach conditions for that day. Click on the date buttons above to view detailed hourly charts for any day.
                </div>
            </div>
        </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
