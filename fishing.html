<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fishing Conditions Chart</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <header class="sticky-header">
        <nav class="nav-container">
            <div class="nav-brand">üèñÔ∏è BeachTime</div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="index.html" class="nav-link">Beach Time</a></li>
                <li class="nav-item"><a href="fishing.html" class="nav-link active">Fishing Time</a></li>
            </ul>
        </nav>
    </header>
    
    <!-- Hamburger Menu Button -->
    <button class="hamburger-menu" id="hamburgerMenu" aria-label="Open controls menu">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>
    
    <!-- Slide-out Controls Panel -->
    <div class="slide-out-panel" id="slideOutPanel">
        <div class="slide-out-header">
            <h2 class="slide-out-title">‚öôÔ∏è Dataset Controls</h2>
            <button class="close-panel-btn" id="closePanelBtn" aria-label="Close controls menu">&times;</button>
        </div>
        <div class="slide-out-content" id="slideOutContent">
            <!-- Controls will be moved here dynamically -->
        </div>
    </div>
    
    <div class="container">
        <h1>üé£ Fishing Conditions</h1>
        
        <!-- Fishing Animation -->
        <div id="fishing-animation-root" style="height: 400px; margin-bottom: 2rem;"></div>
        
        <!-- Hidden inputs to store coordinates and timezone -->
        <input type="hidden" id="latitude-fishing" value="-31.9688" />
        <input type="hidden" id="longitude-fishing" value="115.7673" />
        <input type="hidden" id="timezoneSelectFishing" value="Australia/Perth" />
        
        <div class="day-selector" id="globalDaySelectorFishing">
        </div>
        
        <div class="controls-row">
            <button class="day-btn" id="weeklyOverviewBtnFishing">Weekly Overview</button>
        </div>
        
        <div class="tab-menu" id="chartTabMenuFishing">
            <button class="tab-btn active" data-chart="separated">Separated Rings</button>
            <button class="tab-btn" data-chart="overlaid">Overlaid</button>
            <button class="tab-btn" data-chart="stacked">Stacked</button>
            <button class="tab-btn" data-chart="hourlyRating">Hourly Rating</button>
        </div>
        
        <!-- Fishing Map and Chart Container (50/50 split) -->
        <div class="fishing-layout-split">
            <div class="fishing-map-half" id="fishingMapContainer">
                <div class="location-info-banner" id="locationInfoBanner">
                    <div class="location-info-text">
                        <span class="location-icon">üìç</span>
                        <span class="location-name-display" id="locationNameDisplay">Click on map to select location</span>
                    </div>
                    <div class="location-coords" id="locationCoords">Lat: -31.9688, Lng: 115.7673</div>
                </div>
                <div id="fishingMap" style="height: 500px; border-radius: 15px;"></div>
            </div>
            
            <div class="fishing-chart-half">
                <div class="chart-container active" id="separatedChartFishing">
                <div class="viz-card">
                    <h2 class="viz-title">Fishing Location</h2>
                    <p class="viz-subtitle" id="chartDateFishing">Loading...</p>
                    
                    <div class="chart-with-dataset-controls">
                        <div class="chart-main-area">
                            <div class="canvas-container">
                                <canvas id="mainCanvasFishing"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
                
                <!-- Additional chart containers will be added similarly -->
                <div class="chart-container" id="overlaidChartFishing">
                    <div class="viz-card">
                        <h2 class="viz-title">Overlaid Comparison</h2>
                        <p class="viz-subtitle" id="chartDateFishing2">Loading...</p>
                        <!-- Similar structure as separated chart -->
                    </div>
                </div>
                
                <div class="chart-container" id="stackedChartFishing">
                    <div class="viz-card">
                        <h2 class="viz-title">Stacked View</h2>
                        <p class="viz-subtitle" id="chartDateFishing3">Loading...</p>
                        <!-- Similar structure as separated chart -->
                    </div>
                </div>
                
                <div class="chart-container" id="hourlyRatingChartFishing">
                    <div class="viz-card">
                        <h2 class="viz-title">Hourly Rating</h2>
                        <p class="viz-subtitle" id="chartDateFishing4">Loading...</p>
                        <!-- Similar structure as separated chart -->
                    </div>
                </div>
                
                <div class="chart-container" id="weeklyOverviewChartFishing">
                    <div class="viz-card">
                        <h2 class="viz-title">Weekly Overview</h2>
                        <p class="viz-subtitle">Daily normalized ratings for the week</p>
                        <!-- Similar structure as separated chart -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Full-width sections after the split layout -->
        <div class="data-timeline">
            <div class="timeline-title">Hourly Data</div>
            <div class="timeline-container" id="timelineFishing1"></div>
        </div>
        
        <div class="location-label">
            <div class="location-name">Fishing Location</div>
            <div class="location-date" id="currentDateFishing">Loading...</div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #667eea;"></div>
                <span><strong>Pressure</strong> (ideal: 1010-1020 hPa)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #F28C28;"></div>
                <span><strong>Temperature</strong> (ideal: 15-25¬∞C)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #32dbae;"></div>
                <span><strong>Wind Speed</strong> (ideal: 0-15 km/h)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #c1cad9;"></div>
                <span><strong>Cloud Cover</strong> (less is better)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #7993e8;"></div>
                <span><strong>Rain</strong> (background)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #1F5FA8;"></div>
                <span><strong>Wave Height</strong> (ideal: 0-1.5m)</span>
            </div>
        </div>
        
        <!-- Fish Species Table with Enhanced Marine Database -->
        <div class="fish-table-container" id="fishTableContainer">
            <h2 class="section-title">üêü Marine Species Database</h2>
            <p class="section-subtitle">Fish species commonly found at this location</p>
            <div id="fishSpeciesTable" class="fish-species-table">
                <p>Select a location on the map to view local fish species...</p>
            </div>
        </div>
        
        <!-- How to Read Chart Info Box -->
        <div class="info-box">
            <div class="info-title">How to Read This Chart</div>
            <div class="info-text">
                The chart flows clockwise from 7am (left) through 12pm-1pm (top) to 7pm (right) in a semi-circle arc. 
                Each colored ring represents a different metric in its own range. Pressure (innermost), Temperature, Wind Speed, Cloud Cover (inverted), and Wave Height (outermost).
                Rain probability is shown as a water droplet pattern in the background of each hour segment.
                Higher values within each ring indicate better scores (closer to ideal conditions). 
                Time labels and detailed readings appear around the outside of the chart.
            </div>
        </div>
    </div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="fishing-animation.js"></script>
    <script src="script.js"></script>
    <script src="fishing-script.js"></script>
    <script>
        // Initialize fishing animation after page loads
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof initFishingAnimation === 'function') {
                // Delay animation initialization to ensure all dependencies are loaded
                setTimeout(initFishingAnimation, 500);
            }
        });
    </script>
</body>
</html>
